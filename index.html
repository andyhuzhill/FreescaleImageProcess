<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Freescaleimageprocess by andyhuzhill</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Freescaleimageprocess</h1>
        <h2></h2>
        <a href="https://github.com/andyhuzhill/FreescaleImageProcess" class="button"><small>View project on</small>GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a name="%E9%A3%9E%E6%80%9D%E5%8D%A1%E5%B0%94%E6%99%BA%E8%83%BD%E8%BD%A6%E7%AB%9E%E8%B5%9B-%E6%91%84%E5%83%8F%E5%A4%B4%E7%BB%84-%E8%B0%83%E8%AF%95%E4%B8%8A%E4%BD%8D%E6%9C%BA" class="anchor" href="#%E9%A3%9E%E6%80%9D%E5%8D%A1%E5%B0%94%E6%99%BA%E8%83%BD%E8%BD%A6%E7%AB%9E%E8%B5%9B-%E6%91%84%E5%83%8F%E5%A4%B4%E7%BB%84-%E8%B0%83%E8%AF%95%E4%B8%8A%E4%BD%8D%E6%9C%BA"><span class="octicon octicon-link"></span></a>飞思卡尔智能车竞赛 摄像头组 调试上位机</h1>

<p>这个程序是我参加飞思卡尔智能汽车竞赛是用来分析图像数据和调试中线提取算法的工具，使用上位机，可以大大提高调试效率，不需要总是去让小车在跑道上跑。</p>

<h2>
<a name="%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F" class="anchor" href="#%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F"><span class="octicon octicon-link"></span></a>数据格式</h2>

<p>由于这个软件，我写了好几个版本，数据的格式也改了好几次，以下做一个简单说明。
 介绍图像数据之前，我要介绍一下我使用的摄像头。我们使用的是野火设计的鹰眼摄像头，采用ov7725~cmos芯片，采用硬件二值化，单片机使用DMA采集图像，采集回来的直接就是二值化的图像，每个像素点只有1或0。</p>

<h3>
<a name="freescale2" class="anchor" href="#freescale2"><span class="octicon octicon-link"></span></a>FreeScale2</h3>

<p>FreeScale2程序使用的数据格式如下：
 分辨率为50x50的二值化后的数据，使用50x50的二维数组保存数据。接收到的数据，每个像素点之间用英文逗号‘，’分隔，每一帧图像之间用‘img’分隔。
 下面是一个示例数据:</p>

<pre><code>img
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,1,0,1,1,1,1,0,1,1,1,1,0,0,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,
1,1,0,1,1,1,1,0,0,0,1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,
1,1,0,1,0,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,
0,0,0,1,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,0,
0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,0,0,1,1,1,0,1,1,1,1,0,1,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,1,0,1,1,1,1,0,1,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0,1,1,1,1,0,1,0,
0,0,0,1,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,1,1,0,1,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,1,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,
0,1,0,1,1,1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,0,0,1,
1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,1,
1,1,0,1,1,1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,
1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,
1,1,0,1,1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,        
1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,
1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,
1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,

img
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,0,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,0,0,
1,1,0,1,1,1,1,0,1,1,0,0,0,1,1,1,1,0,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,
...
</code></pre>

<p>上位机运行如下图所示
<img src="http://andyhuzhill.github.io/images/freescale/FreeScale2.png" alt=""></p>

<p>FreeScale2程序还有一个调试电机PID程序的功能。
使用方法就是用串口发回编码器采集回的转速，上位机绘制出曲线图。
下面是几个采集的图像。
<img src="http://andyhuzhill.github.io/images/freescale/pidchaotiao.jpg" alt=""><img src="http://andyhuzhill.github.io/images/freescale/pidwending.jpg" alt=""><img src="http://andyhuzhill.github.io/images/freescale/pidzhengdang.jpg" alt=""></p>

<h3>
<a name="freescale3" class="anchor" href="#freescale3"><span class="octicon octicon-link"></span></a>FreeScale3</h3>

<p>上面那个数据格式需要下位机发送已二值化且存在50x50数组里面的数据，因为每次只发送1或0，比较浪费时间，于是，我改成直接发送摄像头采集回来的一个字节八个像素点的数据，然后用上位机将图像展开成80x60的数组里面。</p>

<p>示例图像数据如下：</p>

<pre><code>img
0,0,0,0,0,0,0,0,0,0,255,255,255,254,31,255,255,255,255,255,255,255,255,248,63,255,255,255,1,255,255,255,255,255,255,254,14,0,0,7,255,255,255,255,240,0,0,0,0,0,255,255,255,255,0,0,0,0,0,0,255,255,255,240,0,0,0,0,7,255,255,255,255,128,0,0,255,255,255,255,255,255,254,0,0,31,255,255,255,255,255,255,248,0,0,127,255,255,255,248,255,255,240,0,0,255,255,255,255,240,255,255,192,0,0,255,255,255,255,240,255,255,128,0,0,255,255,255,255,240,255,255,0,0,0,255,255,255,255,248,255,254,0,0,0,127,255,255,255,248,255,252,0,0,0,63,255,255,255,252,255,252,0,0,0,15,255,255,255,254,255,248,0,0,0,3,255,255,255,255,255,248,0,0,0,0,255,255,255,255,255,248,0,0,0,0,31,255,255,255,255,240,0,0,0,0,7,253,255,255,255,240,0,0,0,0,3,253,255,255,255,240,0,0,0,0,0,255,255,255,255,240,0,0,0,0,0,63,255,255,255,248,0,0,0,0,0,31,255,255,255,248,0,0,0,0,0,7,255,255,255,248,0,0,0,0,0,3,255,255,255,252,0,0,0,0,0,1,255,255,255,252,0,0,0,0,0,0,255,255,255,254,0,0,0,0,0,0,127,255,255,255,0,0,0,0,0,0,63,255,255,255,0,0,0,0,0,0,31,255,255,255,128,0,0,0,0,0,15,255,255,255,192,0,0,0,0,0,7,255,255,255,192,0,0,0,0,0,3,255,255,255,224,0,0,0,0,0,1,255,255,255,224,0,0,0,0,0,0,255,255,255,240,0,0,0,0,0,0,255,255,255,240,0,0,0,0,0,0,127,255,255,240,0,0,0,0,0,0,63,255,255,240,0,0,0,0,0,0,63,255,255,240,0,0,0,0,0,0,31,255,255,248,0,0,0,0,0,0,15,255,255,248,0,0,0,0,0,0,15,255,255,248,0,0,0,0,0,0,7,255,255,248,0,0,0,0,0,0,7,255,255,248,0,0,0,0,0,0,3,255,255,240,0,0,0,0,0,0,3,255,255,240,0,0,0,0,0,0,1,255,255,240,0,0,0,0,0,0,1,255,255,240,0,0,0,0,0,0,1,255,255,240,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,192,0,0,0,0,0,0,0,255,255,192,0,0,0,0,0,0,0,255,255,192,0,0,0,0,0,0,0,
img
0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,248,31,255,255,255,255,255,255,255,255,255,255,255,255,248,0,63,255,255,255,255,254,0,0,0,0,0,255,255,255,255,192,0,0,0,0,0,255,255,255,252,0,0,0,0,1,255,255,255,255,224,0,0,0,0,31,255,255,255,255,0,0,7,255,255,255,255,255,255,252,0,0,15,255,255,255,255,255,255,248,0,0,127,255,255,255,248,255,255,224,0,0,255,255,255,255,248,255,255,192,0,0,255,255,255,255,248,255,255,128,0,0,255,255,255,255,248,255,255,0,0,0,255,255,255,255,248,255,254,0,0,0,127,255,255,255,252,255,252,0,0,0,63,255,255,255,254,255,248,0,0,0,31,255,255,255,254,255,248,0,0,0,7,255,255,255,255,255,240,0,0,0,1,255,255,255,255,255,240,0,0,0,0,127,255,255,255,255,240,0,0,0,0,31,253,255,255,255,224,0,0,0,0,7,255,255,255,255,224,0,0,0,0,1,255,255,255,255,224,0,0,0,0,0,127,255,255,255,240,0,0,0,0,0,63,255,255,255,240,0,0,0,0,0,15,255,255,255,240,0,0,0,0,0,7,255,255,255,240,0,0,0,0,0,3,255,255,255,248,0,0,0,0,0,0,255,255,255,248,0,0,0,0,0,0,127,255,255,252,0,0,0,0,0,0,63,255,255,252,0,0,0,0,0,0,31,255,255,254,0,0,0,0,0,0,15,255,255,255,0,0,0,0,0,0,7,255,255,255,0,0,0,0,0,0,3,255,255,255,128,0,0,0,0,0,1,255,255,255,192,0,0,0,0,0,1,255,255,255,192,0,0,0,0,0,0,255,255,255,192,0,0,0,0,0,0,127,255,255,224,0,0,0,0,0,0,63,255,255,224,0,0,0,0,0,0,63,255,255,224,0,0,0,0,0,0,31,255,255,224,0,0,0,0,0,0,31,255,254,240,0,0,0,0,0,0,15,255,255,240,0,0,0,0,0,0,7,255,255,240,0,0,0,0,0,0,7,255,255,240,0,0,0,0,0,0,3,255,255,240,0,0,0,0,0,0,3,255,255,240,0,0,0,0,0,0,1,255,255,240,0,0,0,0,0,0,1,255,255,240,0,0,0,0,0,0,0,255,255,240,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,224,0,0,0,0,0,0,0,255,255,192,0,0,0,0,0,0,0,255,255,192,0,0,0,0,0,0,0,
img
</code></pre>

<p>上位机运行如下图所示
<img src="http://andyhuzhill.github.io/images/freescale/FreeScale3.png" alt=""></p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/andyhuzhill/FreescaleImageProcess/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/andyhuzhill/FreescaleImageProcess/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/andyhuzhill/FreescaleImageProcess"></a> is maintained by <a href="https://github.com/andyhuzhill">andyhuzhill</a>.</p>

          <p>This page was generated by <a href="pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>